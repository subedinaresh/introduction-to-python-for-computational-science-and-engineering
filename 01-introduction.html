
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>1. Introduction &#8212; Introduction to Python for Computational Science and Engineering</title>
    
  <link rel="stylesheet" href="_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinx-book-theme.40e2e510f6b7d1648584402491bb10fe.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/myfile.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script kind="utterances">

    var commentsRunWhenDOMLoaded = cb => {
    if (document.readyState != 'loading') {
        cb()
    } else if (document.addEventListener) {
        document.addEventListener('DOMContentLoaded', cb)
    } else {
        document.attachEvent('onreadystatechange', function() {
        if (document.readyState == 'complete') cb()
        })
    }
}

var addUtterances = () => {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src = "https://utteranc.es/client.js";
    script.async = "async";

    script.setAttribute("repo", "fangohr/introduction-to-python-for-computational-science-and-engineering");
    script.setAttribute("issue-term", "pathname");
    script.setAttribute("theme", "github-light");
    script.setAttribute("label", "💬 utterances");
    script.setAttribute("crossorigin", "anonymous");

    sections = document.querySelectorAll("div.section");
    if (sections !== null) {
        section = sections[sections.length-1];
        section.appendChild(script);
    }
}
commentsRunWhenDOMLoaded(addUtterances);
</script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.d31b09fe5c1d09cb49b26a786de4a05d.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="2. A powerful calculator" href="02-powerful-calculator.html" />
    <link rel="prev" title="Python for Computational Science and Engineering" href="opening.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="index.html">
  
  <img src="_static/logo.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Introduction to Python for Computational Science and Engineering</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="opening.html">
   Python for Computational Science and Engineering
  </a>
 </li>
</ul>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   1. Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="02-powerful-calculator.html">
   2. A powerful calculator
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="03-data-types-structures.html">
   3. Data Types and Data Structures
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="04-introspection.html">
   4. Introspection
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="05-input-output.html">
   5. Input and Output
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="06-control-flow.html">
   6. Control Flow
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="07-functions-modules.html">
   7. Functions and modules
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="08-functional-tools.html">
   8. Functional tools
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="09-common-tasks.html">
   9. Common tasks
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="10-matlab-to-python.html">
   10. From Matlab to Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="11-python-shells.html">
   11. Python shells
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="12-symbolic-computation.html">
   12. Symbolic computation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="13-numeric-computation.html">
   13. Numerical Computation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="14-numpy.html">
   14. Numerical Python (numpy): arrays
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="15-visualising-data.html">
   15. Visualising Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="16-scipy.html">
   16. Numerical Methods using Python (scipy)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="17-pandas.html">
   17. Pandas - Data Science with Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="18-next-steps.html">
   18. Where to go from here?
  </a>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/01-introduction.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/fangohr/introduction-to-python-for-computational-science-and-engineering"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/fangohr/introduction-to-python-for-computational-science-and-engineering/issues/new?title=Issue%20on%20page%20%2F01-introduction.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/fangohr/introduction-to-python-for-computational-science-and-engineering/master?urlpath=tree/book/01-introduction.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#computational-modelling">
   1.1. Computational Modelling
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id1">
     1.1.1. Introduction
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id2">
     1.1.2. Computational Modelling
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#programming-to-support-computational-modelling">
     1.1.3. Programming to support computational modelling
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#why-python-for-scientific-computing">
   1.2. Why Python for scientific computing?
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#optimisation-strategies">
     1.2.1. Optimisation strategies
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#get-it-right-first-then-make-it-fast">
     1.2.2. Get it right first, then make it fast
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#prototyping-in-python">
     1.2.3. Prototyping in Python
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#literature">
     1.2.4. Literature
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#recorded-video-lectures-on-python-for-beginners">
     1.2.5. Recorded video lectures on Python for beginners
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#python-tutor-mailing-list">
     1.2.6. Python tutor mailing list
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#python-version">
   1.3. Python version
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#these-documents">
   1.4. These documents
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-file-magic">
     1.4.1. The
     <code class="docutils literal notranslate">
      <span class="pre">
       %%file
      </span>
     </code>
     magic
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-to-execute-shell-commands">
     1.4.2. The
     <code class="docutils literal notranslate">
      <span class="pre">
       !
      </span>
     </code>
     to execute shell commands
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-nbval-tags">
     1.4.3. The
     <code class="docutils literal notranslate">
      <span class="pre">
       #NBVAL
      </span>
     </code>
     tags
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#your-feedback">
   1.5. Your feedback
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="introduction">
<h1><span class="section-number">1. </span>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<p>This text summarises a number of core ideas relevant to Computational Engineering and Scientific Computing using Python. The emphasis is on introducing some basic Python (programming) concepts that are relevant for numerical algorithms. The later chapters touch upon numerical libraries such as <span><code class="docutils literal notranslate"><span class="pre">numpy</span></code></span> and <span><code class="docutils literal notranslate"><span class="pre">scipy</span></code></span> each of which deserves much more space than provided here. We aim to enable the reader to learn independently how to use other functionality of these libraries using the available documentation (online and through the packages itself).</p>
<div class="section" id="computational-modelling">
<h2><span class="section-number">1.1. </span>Computational Modelling<a class="headerlink" href="#computational-modelling" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3><span class="section-number">1.1.1. </span>Introduction<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Increasingly, processes and systems are researched or developed through computer simulations: new aircraft prototypes such as for the recent A380 are first designed and tested virtually through computer simulations. With the ever increasing computational power available through supercomputers, clusters of computers and even desktop and laptop machines, this trend is likely to continue.</p>
<p>Computer simulations are routinely used in fundamental research to help understand experimental measurements, and to replace – for example – growth and fabrication of expensive samples/experiments where possible. In an industrial context, product and device design can often be done much more cost effectively if carried out virtually through simulation rather than through building and testing prototypes. This is in particular so in areas where samples are expensive such as nanoscience (where it is expensive to create small things) and aerospace industry (where it is expensive to build large things). There are also situations where certain experiments can only be carried out virtually (ranging from astrophysics to study of effects of large scale nuclear or chemical accidents). Computational modelling, including use of computational tools to post-process, analyse and visualise data, has been used in engineering, physics and chemistry for many decades but is becoming more important due to the cheap availability of computational resources. Computational Modelling is also starting to play a more important role in studies of biological systems, the economy, archeology, medicine, health care, and many other domains.</p>
</div>
<div class="section" id="id2">
<h3><span class="section-number">1.1.2. </span>Computational Modelling<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>To study a process with a computer simulation we distinguish two steps: the first one is to develop a <em>model</em> of the real system. When studying the motion of a small object, such as a penny, say, under the influence of gravity, we may be able to ignore friction of air: our model — which might only consider the gravitational force and the penny’s inertia, i.e. <span class="math notranslate nohighlight">\(a(t) = F/m = -9.81\mathrm{m}/\mathrm{s}^2\)</span> — is an approximation of the real system. The model will normally allow us to express the behaviour of the system (in some approximated form) through mathematical equations, which often involve ordinary differential equations (ODEs) or partial differential equatons (PDEs).</p>
<p>In the natural sciences such as physics, chemistry and related engineering, it is often not so difficult to find a suitable model, although the resulting equations tend to be very difficult to solve, and can in most cases not be solved analytically at all.</p>
<p>On the other hand, in subjects that are not as well described through a mathematical framework and depend on behaviour of objects whose actions are impossible to predict deterministically (such as humans), it is much more difficult to find a good model to describe reality. As a rule of thumb, in these disciplines the resulting equations are easier to solve, but they are harder to find and the validity of a model needs to be questioned much more. Typical examples are attempts to simulate the economy, the use of global resources, the behaviour of a panicking crowd, etc.</p>
<p>So far, we have just discussed the development of <em>models</em> to describe reality, and using these models does not necessarily involve any computers or numerical work at all. In fact, if a model’s equation can be solved analytically, then one should do this and write down the solution to the equation.</p>
<p>In practice, hardly any model equations of systems of interest can be solved analytically, and this is where the computer comes in: using numerical methods, we can at least study the model <em>for a particular set of boundary conditions</em>. For the example considered above, we may not be able to easily see from a numerical solution that the penny’s velocity under the influence of gravity will change linearly with time (which we can read easily from the analytical solution that is available for this simple system: <span class="math notranslate nohighlight">\(v(t) = t\cdot 9.81 \mathrm{m}/\mathrm{s}^2+v_0\)</span>)).</p>
<p>The numerical solution that can be computed using a computer would consist of data that shows how the velocity changes over time for a particular initial velocity <em>v</em><sub>0</sub> (<em>v</em><sub>0</sub> is a boundary condition here). The computer program would report a long lists of two numbers keeping the (i) value of time <em>t</em><sub><em>i</em></sub> for which a particular (ii) value of the velocity <em>v</em><sub><em>i</em></sub> has been computed. By plotting all <em>v</em><sub><em>i</em></sub> against <em>t</em><sub><em>i</em></sub>, or by fitting a curve through the data, we may be able to understand the trend from the data (which we can just see from the analytical solution of course).</p>
<p>It is clearly desirable to find an analytical solutions wherever possible but the number of problems where this is possible is small. Usually, the obtaining numerical result of a computer simulation is very useful (despite the shortcomings of the numerical results in comparison to an analytical expression) because it is the only possible way to study the system at all.</p>
<p>The name <em>computational modelling</em> derives from the two steps: (i) <em>modelling</em>, i.e. finding a model description of a real system, and (ii) solving the resulting model equations using <em>computational</em> methods because this is the only way the equations can be solved at all.</p>
</div>
<div class="section" id="programming-to-support-computational-modelling">
<h3><span class="section-number">1.1.3. </span>Programming to support computational modelling<a class="headerlink" href="#programming-to-support-computational-modelling" title="Permalink to this headline">¶</a></h3>
<p>A large number of packages exist that provide computational modelling capabilities. If these satisfy the research or design needs, and any data processing and visualisation is appropriately supported through existing tools, one can carry out computational modelling studies without any deeper programming knowledge.</p>
<p>In a research environment – both in academia and research on new products/ideas/… in industry – one often reaches a point where existing packages will not be able to perform a required simulation task, or where more can be learned from analysing existing data in news ways etc.</p>
<p>At that point, programming skills are required. It is also generally useful to have a broad understanding of the building blocks of software and basic ideas of software engineering as we use more and more devices that are software-controlled.</p>
<p>It is often forgotten that there is nothing the computer can do that we as humans cannot do. The computer can do it much faster, though, and also with making far fewer mistakes. There is thus no magic in computations a computer carries out: they could have been done by humans, and – in fact – were for many years (see for example Wikipedia entry on <a class="reference external" href="https://en.wikipedia.org/wiki/Human_computer">Human Computer</a>).</p>
<p>Understanding how to build a computer simulation comes roughly down to: (i) finding the model (often this means finding the right equations), (ii) knowing how to solve these equations numerically, (ii) to implement the methods to compute these solutions (this is the programming bit).</p>
</div>
</div>
<div class="section" id="why-python-for-scientific-computing">
<h2><span class="section-number">1.2. </span>Why Python for scientific computing?<a class="headerlink" href="#why-python-for-scientific-computing" title="Permalink to this headline">¶</a></h2>
<p>The design focus on the Python language is on productivity and code readability, for example through:</p>
<ul class="simple">
<li><p>Interactive python console</p></li>
<li><p>Very clear, readable syntax through whitespace indentation</p></li>
<li><p>Strong introspection capabilities</p></li>
<li><p>Full modularity, supporting hierarchical packages</p></li>
<li><p>Exception-based error handling</p></li>
<li><p>Dynamic data types &amp; automatic memory management</p></li>
</ul>
<p><em>As Python is an interpreted language, and it runs many times slower than compiled code, one might ask why anybody should consider such a ’slow’ language for computer simulations?</em></p>
<p>There are two replies to this criticism:</p>
<ol class="simple">
<li><p><em>Implementation time versus execution time</em>: It is not the execution time alone that contributes to the cost of a computational project: one also needs to consider the cost of the development and maintenance work.</p></li>
</ol>
<p>In the early days of scientific computing (say in the 1960/70/80), compute time was so expensive that it made perfect sense to invest many person months of a programmer’s time to improve the performance of a calculation by a few percent.</p>
<p>Nowadays, however, the CPU cycles have become much cheaper than the programmer’s time. For research codes which often run only a small number of times (before the researchers move on to the next problem), it may be economic to accept that the code runs only at 25% of the expected possible speed if this saves, say, a month of a researcher’s (or programmers) time. For example: if the execution time of the piece of code is 10 hours, and one can predict that it will run about 100 times, then the total execution time is approximately 1000 hours. It would be great if this could be reduced to 25% and one could save 750 (CPU) hours. On the other hand, is an extra wait (about a month) and the cost of 750 CPU hours worth investing one month of a person’s time [who could do something else while the calculation is running]? Often, the answer is not.</p>
<p><em>Code readability &amp; maintenance - short code, fewer bugs</em>: A related issue is that a research code is not only used for one project, but carries on to be used again and again, evolves, grows, bifurcates etc. In this case, it is often justified to invest more time to make the code fast. At the same time, a significant amount of programmer time will go into (i) introducing the required changes, (ii) testing them even before work on speed optimisation of the changed version can start. To be able to maintain, extend and modify a code in often unforeseen ways, it can only be helpful to use a language that is easy to read and of great expressive power.</p>
<ol>
<li><p><em>Well-written Python code can be very fast</em> if time critical parts in executed through compiled language.</p>
<p>Typically, less than 5% percent of the code base of a simulation project need more than 95% of the execution time. As long as these calculations are done very efficiently, one doesn’t need to worry about all other parts of the code as the overall time their execution takes is insignificant.</p>
<p>The compute intense part of the program should to be tuned to reach optimal performance. Python offers a number of options.</p>
<ul class="simple">
<li><p>For example, the <span><code class="docutils literal notranslate"><span class="pre">numpy</span></code></span> Python extension provides a Python interface to the compiled and efficient LAPACK libraries that are the quasi-standard in numerical linear algebra. If the problems under study can be formulated such that eventually large systems of algebraic equations have to be solved, or eigenvalues computed, etc, then the compiled code in the LAPACK library can be used (through the Python-numpy package). At this stage, the calculations are carried out with the same performance of Fortran/C as it is essentially Fortran/C code that is used. Matlab, by the way, exploits exactly this: the Matlab scripting language is very slow (about 10 time slower than Python), but Matlab gains its power from delegating the matix operation to the compiled LAPACK libraries.</p></li>
<li><p>Existing numerical C/Fortran libraries can be interfaced to be usable from within Python (using for example Swig, Boost.Python and Cython).</p></li>
<li><p>Python can be extended through compiled languages if the computationally demanding part of the problem is algorithmically non-standard and no existing libraries can be used.</p></li>
</ul>
<p>Commonly used are C, Fortran and C++ to implement fast extensions.</p>
<ul class="simple">
<li><p>We list some tools that are used to use compiled code from Python:</p>
<ul>
<li><p>The <span><code class="docutils literal notranslate"><span class="pre">scipy.weave</span></code></span> extension is useful if just a short expression needs to be expressed in C.</p></li>
<li><p>The Cython interface is growing in popularity to (i) semi-automatically declare variable types in Python code, to translate that code to C (automatically) and to then use the compiled C code from Python. Cython is also used to quickly wrap an existing C library with an interface so the C library can be used from Python.</p></li>
<li><p>Boost.Python is specialised for wrapping C++ code in Python.</p></li>
</ul>
</li>
</ul>
</li>
</ol>
<p><em>The conclusion is that Python is “fast enough” for most computational tasks, and that its user friendly high-level language often makes up for reduced speed in comparison to compiled lower-level languages. Combining Python with tailor-written compiled code for the performance critical parts of the code, results in virtually optimal speed in most cases.</em></p>
<div class="section" id="optimisation-strategies">
<h3><span class="section-number">1.2.1. </span>Optimisation strategies<a class="headerlink" href="#optimisation-strategies" title="Permalink to this headline">¶</a></h3>
<p>We generally understand reduction of execution time when discussing “code optimisation” in the context of computational modelling, and we essentially like to carry out the required calculations as fast as possible. (Sometimes we need to reduce the amount of RAM, the amount of data input output to disk or the network.) At the same time, we need to make sure that we do not invest inappropriate amounts of programming time to achieve this speed up: as always there needs to be a balance between the programmers’ time and the improvement we can gain from this.</p>
</div>
<div class="section" id="get-it-right-first-then-make-it-fast">
<h3><span class="section-number">1.2.2. </span>Get it right first, then make it fast<a class="headerlink" href="#get-it-right-first-then-make-it-fast" title="Permalink to this headline">¶</a></h3>
<p>To write fast code effectively, we note that the right order is to (i) first write a program that carries out the correct calculation. For this, choose a language/approach that allows you to <em>write the code quickly and make it work quickly</em> — regardless of execution speed. Then (ii) either change the program or re-write it from scratch in the same language to make the execution faster. During the process, keep comparing results with the slow version written first to make sure the optimisation does not introduce errors. (Once we are familiar with the concept of regression tests, they should be used here to compare the new and hopefully faster code with the original code.)</p>
<p>A common pattern in Python is to start writing pure Python code, then start using Python libraries that use compiled code internally (such as the fast arrays Numpy provides, and routines from scipy that go back to established numerical codes such as ODEPACK, LAPACK and others). If required, one can – after careful profiling – start to replace parts of the Python code with a compiled language such as C and Fortran to improve execution speed further (as discussed above).</p>
</div>
<div class="section" id="prototyping-in-python">
<h3><span class="section-number">1.2.3. </span>Prototyping in Python<a class="headerlink" href="#prototyping-in-python" title="Permalink to this headline">¶</a></h3>
<p>It turns out that – even if a particular code has to be written in, say, C++ – it is (often) more time efficient to prototype the code in Python, and once an appropriate design (and class structure) has been found, to translate the code to C++.</p>
</div>
<div class="section" id="literature">
<h3><span class="section-number">1.2.4. </span>Literature<a class="headerlink" href="#literature" title="Permalink to this headline">¶</a></h3>
<p>While this text starts with an introduction of (some aspects of) the basic Python programming language, you may find - depending on your prior experience - that you need to refer to secondary sources to fully understand some ideas.</p>
<p>We repeatedly refer to the following documents:</p>
<ul class="simple">
<li><p>Allen Downey, <em>Think Python</em>. Available online in html and pdf at <a class="reference external" href="https://www.greenteapress.com/thinkpython/thinkpython.html">https://www.greenteapress.com/thinkpython/thinkpython.html</a>, or from Amazon.</p></li>
<li><p>The Python documentation <a class="reference external" href="https://www.python.org/doc/">https://www.python.org/doc/</a>, and:</p></li>
<li><p>The Python tutorial (<a class="reference external" href="https://docs.python.org/3/tutorial/">https://docs.python.org/3/tutorial/</a>)</p></li>
</ul>
<p>You may also find the following links useful:</p>
<ul class="simple">
<li><p>The <span><code class="docutils literal notranslate"><span class="pre">numpy</span></code></span> home page (<a class="reference external" href="https://numpy.org/">https://numpy.org/</a>)</p></li>
<li><p>The <span><code class="docutils literal notranslate"><span class="pre">scipy</span></code></span> home page (<a class="reference external" href="https://www.scipy.org/">https://www.scipy.org/</a>)</p></li>
<li><p>The <span><code class="docutils literal notranslate"><span class="pre">matplotlib</span></code></span> home page (<a class="reference external" href="https://matplotlib.org/">https://matplotlib.org/</a>).</p></li>
<li><p>The Python style guide (<a class="reference external" href="https://www.python.org/dev/peps/pep-0008/">https://www.python.org/dev/peps/pep-0008/</a></p></li>
</ul>
</div>
<div class="section" id="recorded-video-lectures-on-python-for-beginners">
<h3><span class="section-number">1.2.5. </span>Recorded video lectures on Python for beginners<a class="headerlink" href="#recorded-video-lectures-on-python-for-beginners" title="Permalink to this headline">¶</a></h3>
<p>Do you like to listen/follow lectures? There is a series of 24 lectures titled <em>Introduction to Computer Science and Programming</em> delivered by Eric Grimsom and John Guttag from the MIT available at <a class="reference external" href="https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-00-introduction-to-computer-science-and-programming-fall-2008/">https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-00-introduction-to-computer-science-and-programming-fall-2008/</a> This is aimed at students with little or no programming experience. It aims to provide students with an understanding of the role computation can play in solving problems. It also aims to help students, regardless of their major, to feel justifiably confident of their ability to write small programs that allow them to accomplish useful goals.</p>
<p>An more recent <a class="reference external" href="https://www.youtube.com/playlist?list=PLi01XoE8jYohWFPpC17Z-wWhPOSuh8Er-">collection of topic specific (and shorter) tutorial videos</a> is available from <a class="reference external" href="https://www.youtube.com/c/Socratica">Socratica</a> .</p>
</div>
<div class="section" id="python-tutor-mailing-list">
<h3><span class="section-number">1.2.6. </span>Python tutor mailing list<a class="headerlink" href="#python-tutor-mailing-list" title="Permalink to this headline">¶</a></h3>
<p>There is also a Python tutor mailing list (<a class="reference external" href="https://mail.python.org/mailman/listinfo/tutor">https://mail.python.org/mailman/listinfo/tutor</a>) where beginners are welcome to ask questions regarding Python. Both using the archives and posting your own queries (or in fact helping others) may help with understanding the language. Use the normal mailing list etiquette (i.e. be polite, concise, etc). You may want to read <a class="reference external" href="https://www.freebsd.org/doc/en/articles/mailing-list-faq/etiquette.html">https://www.freebsd.org/doc/en/articles/mailing-list-faq/etiquette.html</a> for some guidance on how to ask questions on mailing lists.</p>
</div>
</div>
<div class="section" id="python-version">
<h2><span class="section-number">1.3. </span>Python version<a class="headerlink" href="#python-version" title="Permalink to this headline">¶</a></h2>
<p>There are two version of the Python language out there: Python 2.x and Python 3.x. They are (slightly) different — the changes in Python 3.x were introduced to address shortcomings in the design of the language that were identified since Python’s inception. A decision was made that some incompatibility should be accepted to achieve the higher goal of a better language for the future.</p>
<p>For scientific computation, it is crucial to make use of numerical libraries such as <a class="reference external" href="https://numpy.org/">numpy</a>, <a class="reference external" href="https://www.scipy.org">scipy</a> and the plotting package <a class="reference external" href="https://matplotlib.org/">matplotlib</a>.</p>
<p>All of these are now available for Python 3, and we will use Python 3.x in this book.</p>
<p>However, there is a lot of code still in use that was written for Python 2, and it’s useful to be aware of the differences. The most prominent example is that in Python 2.x, the <code class="docutils literal notranslate"><span class="pre">print</span></code> command is special, whereas in Python 3 it is an ordinary function. For example, in Python 2.7, we can write:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span> <span class="s2">&quot;Hello World&quot;</span>
</pre></div>
</div>
<p>where as in Python 3, this would cause a SyntaxError. The right way to use <code class="docutils literal notranslate"><span class="pre">print</span></code> in Python 3 would be as a function, i.e.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello World&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Hello World
</pre></div>
</div>
</div>
</div>
<p>See <a class="reference internal" href="05-input-output.html"><span class="doc std std-doc">Chapter 5: Input and Output</span></a> for further details.</p>
<p>Fortunately, the function notation (i.e. with the parantheses) is also allowed in Python 2.7, so our examples should execute in Python 3.x and Python 2.7. (There are other differences.)</p>
</div>
<div class="section" id="these-documents">
<h2><span class="section-number">1.4. </span>These documents<a class="headerlink" href="#these-documents" title="Permalink to this headline">¶</a></h2>
<p>This material has been converted from Latex to a set of <a class="reference external" href="https://jupyter.org">Jupyter Notebooks</a>, making it possible to interact with the examples. You can run any code block with an <code class="docutils literal notranslate"><span class="pre">In</span> <span class="pre">[</span> <span class="pre">]:</span></code> prompt by clicking on it and pressing shift-enter, or by clicking the <i class="fa fa-step-forward"></i> button in the toolbar.</p>
<p><em>Code blocks</em> can be recognised (in the html and pdf version of this book) by having coloured items (to emphasise the syntactic role). For example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Hello
Hello
Hello
</pre></div>
</div>
</div>
</div>
<p>The <em>output</em> (here <code class="docutils literal notranslate"><span class="pre">Hello</span></code> repeated on three lines) that is produced by the code block, is shown below the code block and not coloured.</p>
<div class="section" id="the-file-magic">
<h3><span class="section-number">1.4.1. </span>The <code class="docutils literal notranslate"><span class="pre">%%file</span></code> magic<a class="headerlink" href="#the-file-magic" title="Permalink to this headline">¶</a></h3>
<p>We use some features in the notebook that are worth being aware of at this point: a cell starting with the special command <code class="docutils literal notranslate"><span class="pre">%%file</span> <span class="pre">FILENAME</span></code> will create (or override) a file with name <code class="docutils literal notranslate"><span class="pre">FILENAME</span></code> that contains the content that is shown in the cell below.</p>
<p>For example</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%file</span> hello.txt
<span class="n">This</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">content</span> <span class="n">of</span> <span class="n">the</span> <span class="n">file</span> <span class="n">hello</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Writing hello.txt
</pre></div>
</div>
</div>
</div>
<p>To confirm the file has been written and contains, we use some Python commands (which you are not expected to understand at this point):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;hello.txt&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>This is the content of the file hello.txt
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="the-to-execute-shell-commands">
<h3><span class="section-number">1.4.2. </span>The <code class="docutils literal notranslate"><span class="pre">!</span></code> to execute shell commands<a class="headerlink" href="#the-to-execute-shell-commands" title="Permalink to this headline">¶</a></h3>
<p>If we want to run a shell command, we can type it and preceed it by the <code class="docutils literal notranslate"><span class="pre">!</span></code> character. Here is an example: first we create a file that contains a Python hello world program, then we execute it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%file</span> hello.py
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello World&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Writing hello.py
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>python hello.py
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Hello World
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="the-nbval-tags">
<h3><span class="section-number">1.4.3. </span>The <code class="docutils literal notranslate"><span class="pre">#NBVAL</span></code> tags<a class="headerlink" href="#the-nbval-tags" title="Permalink to this headline">¶</a></h3>
<p>In some cells, you will find tags like <code class="docutils literal notranslate"><span class="pre">#NBVAL_SKIP</span></code>, <code class="docutils literal notranslate"><span class="pre">#NBVAL_IGNORE_OUTPUT</span></code> and <code class="docutils literal notranslate"><span class="pre">#NBVAL_RAISES_EXCEPTION</span></code>. You can ignore these.</p>
<p>(We use them to be able to <a class="reference external" href="https://app.circleci.com/pipelines/github/fangohr/introduction-to-python-for-computational-science-and-engineering">automatically execute all notebooks</a> to check that the output produced is the same as what is stored in the notebook. This is an advanced topic of testing, and you can read more about NBVAL at https://github.com/computationalmodelling/nbval).</p>
<p>See <a class="reference internal" href="11-python-shells.html"><span class="doc std std-doc">Chapter 11</span></a> for more information on Jupyter and other Python interfaces.</p>
</div>
</div>
<div class="section" id="your-feedback">
<h2><span class="section-number">1.5. </span>Your feedback<a class="headerlink" href="#your-feedback" title="Permalink to this headline">¶</a></h2>
<p>is desired. If you find anything wrong in this text, or have suggestions how to change or extend it, please feel free to contact Hans at <code class="docutils literal notranslate"><span class="pre">hans.fangohr&#64;xfel.eu</span></code> .</p>
<p>If you find a URL that is not working (or pointing to the wrong material), please let Hans know as well. As the content of the Internet is changing rapidly, it is difficult to keep up with these changes without feedback.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="opening.html" title="previous page">Python for Computational Science and Engineering</a>
    <a class='right-next' id="next-link" href="02-powerful-calculator.html" title="next page"><span class="section-number">2. </span>A powerful calculator</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Hans Fangohr<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="_static/js/index.3da636dd464baa7582d2.js"></script>


    
  </body>
</html>